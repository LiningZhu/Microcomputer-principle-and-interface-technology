### 8086CPU逻辑运算与移位指令

8088/8086CPU 提供了丰富的逻辑运算和移位指令。逻辑运算指令包括与、或、非、异或和测试指令，与、或、非、异或等指令的功能与第一章中介绍的基本逻辑门的功能相同， 这些指令使我们可以用软件的方法实现逻辑运算。移位指令包括左移、右移、循环左移和循环右移指令。指令可以对 8 位或 16 位操作数进行操作。除逻辑非指令外，其它指令的执行都会使标志位CF=OF=0，AF 值不定，对 SF、PF 和 ZF 产生影响。

#### 1.逻辑运算指令

###### （1） 逻辑与指令AND

指令格式：AND OPRD1, OPRD2

功能：OPRD1 与OPRD2 按位进行与操作，结果回送 OPRD1 中。

说明：OPRD1 可以是寄存器或存储器操作数。OPRD2 可以是寄存器或存储器操作数， 还可以是立即数。与操作可以对特定位清 0。

###### （2） 逻辑或指令OR

指令格式：	OR OPRD1, OPRD2

功能：OPRD1 与OPRD2 按位进行或操作，结果回送 OPRD1 中。

说明：OPRD1 可以是寄存器或存储器操作数。OPRD2 可以是寄存器或存储器操作数， 还可以是立即数。或操作可以对特定位置 1。

###### （3） 逻辑非指令NOT

指令格式：NOT OPRD

功能：将OPRD 逐位取反，结果回送 OPRD 中。

说明：OPRD 可以是寄存器或存储器操作数，不能是立即数。指令对所有标志位都不影响。

###### （4） 逻辑异或指令 XOR

指令格式：	XOR	OPRD1, OPRD2

功能：OPRD1 与OPRD2 按位进行异或操作，结果回送OPRD1 中。

说明：OPRD1 可以是寄存器或存储器操作数。OPRD2 可以是寄存器或存储器操作数， 还可以是立即数。

###### （5） 测试指令TEST

指令格式：	TEST	OPRD1, OPRD2

功能：OPRD1 与OPRD2 按位进行与操作，但是结果不回送OPRD1 中，所以指令执行后两个操作数的值保持不变。指令的执行使标志寄存器的标志位 CF=OF=0，AF 值不定，SF、 PF 和 ZF 受影响。通常 ZF 位最受关注。

说明：OPRD1 可以是寄存器或存储器操作数。OPRD2 可以是寄存器或存储器操作数， 还可以是立即数。

**2.** ***\*移位指令\****

移位指令分为非循环移位指令和循环移位指令两类，各包括 4 条。两类移位指令的格式

完全相同，功能都是把目的操作数左移或右移 1 位或多位。目的操作数可以是寄存器或存储

器操作数，可以是字节类型或字类型。源操作数的用法比较固定，如果将目的操作数移动 1 位，则源操作数直接写 1；如果将目的操作数移动 2 位或更多位，则源操作数为 CL，编程遇到这种情况应将移动次数预置入CL 中，再使用移位指令。移位指令影响标志位 CF、OF、PF、SF 和 ZF。

下面介绍移位指令功能时，都以字节数据说明，字类型数据的移位同理。

#### 2.移位指令

##### 非循环移位指令包括 4 条

###### （1） 逻辑左移指令 SHL

指令格式：SHL	OPRD, COUNT

功能：将 OPRD 逐位进行左移，最低位第 0 位向左移到第 1 位，依次移动，最高位移出 OPRD，移到标志寄存器的CF 中；第 0 位空出，用 0 填补。

说明：OPRD 可以是寄存器或存储器操作数，COUNT 可以为 1 或CL。

###### （2） 逻辑右移指令 SHR

指令格式：SHR	OPRD, COUNT

功能：将 OPRD 逐位进行右移，最高位向右移到次高位，依次移动，第 0 位移出OPRD， 移到标志寄存器的CF 中；最高位空出，用 0 填补。

说明：OPRD 可以是寄存器或存储器操作数，COUNT 可以为 1 或CL。

###### （3） 算术左移指令 SAL

指令格式：SAL	OPRD, COUNT

说明：算术左移指令与逻辑左移指令的功能相同，这里不再赘述，但算术左移指令将操作数作为带符号数处理。

###### （4） 算术右移指令 SAR

指令格式：SAR	OPRD, COUNT

功能：将 OPRD 逐位进行右移，最高位向右移到次高位，依次移动，第 0 位移出OPRD， 移到标志寄存器的CF 中；最高位保持不变。

说明：OPRD 可以是寄存器或存储器操作数，COUNT 可以为 1 或CL。

##### 循环移位指令包括 4 条

循环移位，顾名思义首尾相接成一个环，左循环移位后可以通过右循环移位来还原数据， 反之亦然。4 条循环移位指令又按照 CF 标志位是否参加循环细分为两组，一组 CF 不参加循环移位但仍然随着循环操作变化，又称为不带 CF 的循环移位指令；另一组 CF 参加循环， 称为带 CF 的循环移位指令。

###### （1） 不带CF 的循环移位指令

- 循环左移的指令格式：ROL	OPRD, COUNT

​        功能：将 OPRD 逐位进行左移，第 0 位移到第 1 位，依次移动，最高位移至第 0 位， 同时最高位又移到标志寄存器的 CF 中。

- 循环右移的指令格式：ROR	OPRD, COUNT

​        功能：将 OPRD 逐位进行右移，最高位移到次高位，依次移动，第 0 位移至最高位， 同时最高位又移到标志寄存器的 CF 中。

​        说明：OPRD 可以是寄存器或存储器操作数，COUNT 可以为 1 或CL。

###### （2） 带 CF 的循环移位指令

- 循环左移的指令格式：RCL	OPRD, COUNT

​        功能：将 OPRD 逐位进行左移，第 0 位移到第 1 位，依次移动，最高位移至 CF 位，CF 位移到第 0 位。

- 循环右移的指令格式：RCR	OPRD, COUNT

​       功能：将 OPRD 逐位进行右移，最高位移到次高位，依次移动，第 0 位移至 CF 位， CF 位移到最高位。

​       说明：OPRD 可以是寄存器或存储器操作数，COUNT 可以为 1 或CL。

 