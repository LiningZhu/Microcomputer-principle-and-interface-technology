### 8086CPU串操作指令

串或字符串是指在内存中连续存放的由字节或字组成的数据串，可以是数值型或字符型数据。我们常常要从数据串中查找特定数据；或者比较两个串是否相同等，或者把一个串从内存的一个区域传送到另一个区域等操作；使用串操作指令就是最佳选择。串操作指令对串中数据进行相同的操作，可以以字节为单位或以字为单位，可操作的最大串长度为 64K。串操作指令包括：

MOVS 串传送

CMPS 串比较

SCAS 串扫描

STOS 存入串

LODS 取 串

这五种串操作指令都是隐含指令，说明如下：

① 源操作数（源串）默认由 DS:SI 指定，即源串默认在数据段，允许段超越为 CS、ES 和 SS。偏移地址指针 SI 自动修改。

② 目的操作数（目的串）默认由 ES:DI 指定，即目的串默认在附加数据段。不允许段超越。偏移地址指针 DI 自动修改。

③ 通过设定标志寄存器中的方向标志位DF 的值，可以控制串操作的方向。DF 设定为0， 偏移地址指针 SI 和 DI 自动增量，如果串操作为字节操作，每次偏移地址指针加 1，如果为字操作，每次偏移地址指针加 2。DF 设定为 1，偏移地址指针自动减量。如果串操作为字节操作，每次偏移地址指针减 1，如果为字操作，每次偏移地址指针减 2。如图 3-9 所示。

④ 串操作指令本身只操作一次，例如指令 MOVSB 的功能为将 DS:SI 指明的一个字节传送到 ES:DI 指明的内存单元中。如果要使整个的源串数据全部传送到目的串中，需要再加一个重复前缀REP。用于串操作指令的重复前缀有三种，分别是：

REP：无条件重复前缀

REPE：相等时重复（ZF=1），REPZ：比较结果为 0 时重复

REPNE：不相等时重复（ZF=0），REPNZ：比较结果不为 0 时重复

⑤ 带重复操作前缀的串操作指令，需要指明重复次数。用计数器 CX 指定串长度，即重复次数，每次串操作后 CX 自动减 1，直到 CX=0，串操作结束。

综上所述：在使用串操作指令前应预先设置源串指针 DS:SI，目的串指针 ES:DI，计数器 CX 和标志位 DF。

##### 1.串传送指令 MOVS

指令格式：	MOVSB

​                       MOVSW

​                       MOVS OPRD1，OPRD2

功能：字符串传送。

l MOVSB，隐含操作数，将 DS:SI 指明的一个字节传送到 ES:DI 指明的内存单元中。

l MOVSW，隐含操作数，将 DS:SI 指明的两个字节传送到 ES:DI 指明的内存单元中。

l MOVS OPRD1，OPRD2，这种形式常常用在源串段超越的情况下。说明：指令不影响状态标志位。

#####  2.串比较指令 CMPS

指令格式：	CMPSB

​                       CMPSW

​                       CMPS	OPRD1，OPRD2

功能：字符串比较。

l CMPSB，隐含操作数，将 DS:SI 指明的串与 ES:DI 指明的串中的对应元素进行比较，以字节为单位。

l CMPSW，隐含操作数，将 DS:SI 指明的串与 ES:DI 指明的串中的对应元素进行比较，以字为单位。

l MOVS	OPRD1，OPRD2，这种形式常常用在源串段超越的情况下。

说明：指令影响状态标志。两个串中的对应元素做减法操作，影响标志寄存器，但减操作的结果不回送到两个串中，即比较完成后两个串没有改变。

##### 3.串扫描指令 SCAS

指令格式：	SCASB

​                       SCASW

功能：在ES:DI 指明的串中搜索特定数据。特定数据存在 AL（或 AX）中。

l SCASB，隐含操作数AL，将串中的元素与AL 进行比较，以字节为单位。

l SCASW，隐含操作数 AX，将串中的元素与 AX 进行比较，以字为单位。说明：串中的元素与 AL 或 AX 做减法操作，结果不回送，只影响状态标志。

##### 4.取串指令 LODS

指令格式：	LODSB

​                       LODSW

​                       LODS	OPRD

功能：从串中取数据。将DS:SI 指明的串中元素传送到 AL 或AX 中。

l LODSB，隐含操作数 AL，将 DS:SI 指明的串中元素传送到 AL，传送一个字节。

l LODSW，隐含操作数 AX，将 DS:SI 指明的串中元素传送到 AX，传送一个字。说明：指令不影响状态标志，一般不带有重复操作前缀。

##### 5.存串指令 STOS

指令格式：	STOSB

​                       STOSW

功能：把数据存入串中。把 AL 或AX 中的数据传送到ES:DI 指明的串中。

l STOSB，隐含操作数 AL，把 AL 的内容传送到 ES:DI 指明的串中，传送一个字节。

l STOSW，隐含操作数 AX，把 AX 的内容传送到ES:DI 指明的串中，传送一个字。

说明：指令不影响状态标志。一般带有重复操作前缀 REP，相当于用 AL 或 AX 初始化某数据区。

 

 